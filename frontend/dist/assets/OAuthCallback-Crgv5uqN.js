import{u as v,f as r,l as k,q as x,k as h,c as a,b as e,h as b,t as c,d as g,w as _,e as y,r as f,o as n}from"./index-CRTPRc-Y.js";const w={class:"max-w-md mx-auto"},C={class:"card text-center"},A={key:0,class:"py-12"},B={class:"text-xl font-bold mb-2"},N={key:1,class:"py-12"},q={class:"text-gray-400 mb-6"},M={__name:"OAuthCallback",setup(S){const l=x(),m=h(),i=v(),u=r(!0),s=r(""),d=r("");return k(async()=>{try{const o=l.query.token;if(d.value=l.query.provider||"OAuth",!o)throw new Error("No authentication token received");localStorage.setItem("token",o),i.token=o,i.initAuth(),setTimeout(()=>{m.push("/")},500)}catch(o){u.value=!1,s.value=o.message||"Failed to complete OAuth login"}}),(o,t)=>{const p=f("router-link");return n(),a("div",w,[e("div",C,[u.value?(n(),a("div",A,[t[0]||(t[0]=e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-squig-yellow mx-auto mb-4"},null,-1)),e("h2",B,"Completing "+c(d.value)+" login...",1),t[1]||(t[1]=e("p",{class:"text-gray-400"},"Please wait",-1))])):s.value?(n(),a("div",N,[t[3]||(t[3]=e("div",{class:"text-red-500 mb-4"},[e("svg",{class:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[4]||(t[4]=e("h2",{class:"text-xl font-bold mb-2"},"Login Failed",-1)),e("p",q,c(s.value),1),g(p,{to:"/login",class:"btn-primary inline-block"},{default:_(()=>[...t[2]||(t[2]=[y(" Back to Login ",-1)])]),_:1})])):b("",!0)])])}}};export{M as default};
