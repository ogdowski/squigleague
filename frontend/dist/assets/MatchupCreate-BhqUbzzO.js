import{f as s,c,b as e,g as _,h as w,i as k,v as C,t as l,d as M,w as L,e as D,r as N,o as p,j as S}from"./index-CRTPRc-Y.js";const T={class:"max-w-2xl mx-auto"},V={class:"card"},$={key:0},A=["disabled"],B={key:0,class:"bg-red-900/30 border border-red-500 text-red-200 px-4 py-3 rounded"},P={key:1,class:"space-y-6"},U={class:"bg-gray-900 px-4 py-3 rounded font-mono text-squig-yellow text-xl"},q={class:"flex gap-2"},E=["value"],F={class:"text-gray-300"},I={class:"flex gap-4"},G={__name:"MatchupCreate",setup(Y){const m="/api",r=s(""),n=s(!1),u=s(""),v=s(!1),o=s(null),i=s(!1),d=s(""),x=async()=>{n.value=!0,u.value="";try{const a=await S.post(`${m}/matchup`,{army_list:r.value});o.value=a.data,d.value=`${window.location.origin}/matchup/${a.data.name}`,v.value=!0}catch{u.value="Failed to create matchup. Please try again."}finally{n.value=!1}},y=async()=>{try{await navigator.clipboard.writeText(d.value),i.value=!0,setTimeout(()=>{i.value=!1},2e3)}catch(a){console.error("Failed to copy:",a)}},f=()=>{v.value=!1,o.value=null,d.value="",i.value=!1,r.value=""},b=a=>new Date(a).toLocaleString();return(a,t)=>{const h=N("router-link");return p(),c("div",T,[e("div",V,[t[8]||(t[8]=e("h1",{class:"text-3xl font-bold mb-6 text-center"},"Create New Matchup",-1)),v.value?(p(),c("div",P,[t[7]||(t[7]=e("div",{class:"bg-green-900/30 border border-green-500 text-green-200 px-4 py-3 rounded"}," Matchup created successfully! ",-1)),e("div",null,[t[3]||(t[3]=e("h2",{class:"text-xl font-bold mb-3"},"Matchup ID",-1)),e("div",U,l(o.value.name),1)]),e("div",null,[t[4]||(t[4]=e("h2",{class:"text-xl font-bold mb-3"},"Share This Link",-1)),e("div",q,[e("input",{value:d.value,readonly:"",class:"input-field flex-1 font-mono text-sm"},null,8,E),e("button",{onClick:y,class:"btn-secondary whitespace-nowrap"},l(i.value?"Copied!":"Copy"),1)])]),e("div",null,[t[5]||(t[5]=e("h2",{class:"text-xl font-bold mb-3"},"Expires",-1)),e("p",F,l(b(o.value.expires_at)),1)]),e("div",I,[M(h,{to:`/matchup/${o.value.name}`,class:"btn-primary flex-1 text-center"},{default:L(()=>[...t[6]||(t[6]=[D(" Go to Matchup ",-1)])]),_:1},8,["to"]),e("button",{onClick:f,class:"btn-secondary flex-1"}," Create Another ")])])):(p(),c("div",$,[t[2]||(t[2]=e("p",{class:"text-gray-300 mb-6"}," Submit your army list to create a matchup. You'll receive a shareable link to send to your opponent. ",-1)),e("form",{onSubmit:_(x,["prevent"]),class:"space-y-4"},[e("div",null,[t[1]||(t[1]=e("label",{class:"block text-sm font-medium mb-2"}," Your Army List ",-1)),k(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=g=>r.value=g),rows:"15",class:"input-field w-full font-mono text-sm",placeholder:"Paste your army list here...",required:""},null,512),[[C,r.value]])]),e("button",{type:"submit",disabled:n.value,class:"btn-primary w-full text-xl px-8 py-4"},l(n.value?"Creating...":"Create Matchup"),9,A),u.value?(p(),c("div",B,l(u.value),1)):w("",!0)],32)]))])])}}};export{G as default};
