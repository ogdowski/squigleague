# Development Docker Compose Override
# Builds images locally instead of pulling from registry
#
# Usage: docker-compose -f docker-compose.yml -f docker-compose.dev.yml up -d

services:
  backend:
    # Build locally for development
    build:
      context: ./backend
      dockerfile: Dockerfile

    # Development-specific settings
    restart: unless-stopped

    # Verbose logging for development
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "5"

  frontend:
    # Build locally for development
    build:
      context: ./frontend
      dockerfile: Dockerfile

    # Development-specific settings
    restart: unless-stopped

    # Verbose logging for development
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "5"

  nginx:
    # Build locally for development
    build:
      context: ./nginx
      dockerfile: Dockerfile

    # Override prod config with http-only for local development
    volumes:
      - ./nginx/nginx.http-only.conf:/etc/nginx/nginx.conf:ro
